# 조건부 확률


> - $P(A||B)$ 사건 B가 일어난 상황에서 사건 A가 발생할 확률
> - 베이즈 정리: 조건부확률을 이용하여 정보를 갱신하는 방법.
> - P(A ∩ B) = P(B)P(A∥B)
> - P(B∥A) = P(A ∩ B)/P(A) = P(B)P(A∥B)/P(A)

## 예제

 - 코로나 발병률이 10%.
 - 코로나에 실제 걸렸을때 검진될 확률 99%
 - 실제로 걸리지 않았을 때 오검진될 확률 1%


어떤 사람이 질병에 걸렸다고 검진결과가 나왔을때 정말로 코로나에 감염 되었을 확률은?

> - $세타$: 코로나 발병 사건으로 정의(관찰 불가)
> - $D$: 데스트 결과 (관찰 가능)

### 생각정리

P($세타$|$D$) = P($세타$)*P($D$|$세타$)/P($D$)

> - 문제의 의미를 세부적으로 말로 표현해보자.
> - 임의의 사람의 '검진결과 양성' 즉, $D$에 해당,
> - P($세타$) = 0.1 (코로나 발병률, 걸릴확률)
> - P($D$|$세타$) = 0.99 (코로나 걸렸을때, 검진해서 코로나라고 검진될 확률)
> - P($D$|$세타반대?$) = 0.01 (코로나 걸리지 않았을때, 검진해서 코로나라고 검진될 확률)

> - P($세타$|$D$) -> 검진해서 양성이 나왔을때, 실제 코로나에 걸렸을 확률
> - P($D$) -> 검진해서 양성이 나올 확률
```
seta = 0.1 # 코로나에 걸릴 확률 (사전확률)
de_seta = 0.99 # 코로나 걸렸을때, 검진시 양성일 확률 (민감도)
de_seta_inv = 0.01 # 코로나 안걸렸는데, 검진시 양성일 확률 (오탐률)

# 구하고자 하는것, 검진했을 때, 양성이 나왔다. 실제 코로나에 걸렸을 확률?

# 주변확률분포 공식에 따라

de = seta*de_seta + (1-seta)*de_seta_inv # 검진시 양성이 나올 확률

seta_de = seta*de_seta/de # 검진을 해서 양성이 나왓을때, 실제 코로나에 걸렸을 확률 (정밀도)



print(seta_de)
```


```
# 오검진될 확률(de_seta_inv)이 10%라면

de_seta_inv = 0.1

de = seta*de_seta + (1-seta)*de_seta_inv

seta_de = seta*de_seta/de


print(seta_de) # 오탐률(False alarm)이 오르면 테스트의 정밀도 (precision)가 떨어짐.

## 검진했을때 양성인데, 실제 코로나 걸렸을 확률이 확 떨어짐을 알수있다.
```
### 베이즈 정리를 통한 정보의 갱신

> - 새로운 데이터가 들어왔을때, 앞서 계산한 사후 확률(P($θ$|$D$))을 사전확률로 사용하여, 갱신된 사후확률을 계산할 수 잇음.

```
## 앞에서 검사한 사람이 한번더 검사를 받아서 양성이 나왓을때, 실제 코로나일 확률은?

de = seta*de_seta + (1-seta)*de_seta_inv 

seta_de = seta*de_seta/de 


print(seta_de)
```
```
# 사전확률 $θ$에 사후확률 $θ$|$D$를 대입

seta = seta_de

de = seta*de_seta + (1-seta)*de_seta_inv 

seta_de = seta*de_seta/de 
print(de)

print(seta_de)
```
## 조건부 확률
> - 조건부 확률은 유용한 통계적 해석을 제공하지만 인과관계를 추론할 때 함부로 사용해서는 안된다.


